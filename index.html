<!doctype html>
<html class="no-js">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>chkbk Vue</title>
<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="bower_components/foundation/css/foundation.min.css">
<link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<style type="text/css">
.debit{
    color: red;
}
.deposit{
    color: green;
}
.deposit-row{
    background-color: #f1f9f7 !important;
    border-color: #e0f1e9;
    color: #1d9d74 !important;
}
.debit-row{
    border-color: #CE9191;
    color: #C34242;
}


</style>
</head>
<body>
<div class="row">


<div class="sidebar large-4 columns">
    <div class="header">
    <hgroup>
        <h1>chkbk</h1>
        <h4 class="subheader">Your online checkbook.</h4>
    </hgroup>

    <nav class="nav">
        <a class="tiny button" href="#">Sign up</a>
    </nav>
    </div>
</div>



<div class="content large-8 columns" id="chkbk-app">



<form onsubmit="return false">
    <button class="pure-button"><i class="fa fa-camera"></i></button>
    <input type="number" v-model="chkbk_id" placeholder="Check #">
    <input type="date" v-model="chkbk_date">
    <input type="text" v-model="chkbk_note" placeholder="Note (Kroger,paycheck, etc)">
    <label><input type="radio" value="0" v-model="chkbk_type" checked> <i class="fa fa-minus-circle fa-lg debit"></i></label> <label> <input type="radio" value="1" v-model="chkbk_type"> <i class="fa fa-plus-circle fa-lg deposit"></i></label> 
    <input type="text" placeholder="Amount" v-model="chkbk_amount" class="pure-u-3-24">
    <button v-on="click: saveEntry" class="pure-button pure-button-primary">Save</button>
</form>

<table id="chkbk-tbl" class="pure-table pure-table-striped">
    <thead>
        <tr>
            <th><i class="fa fa-camera"></i></th>
            <th>Check #</th>
            <th>Date</th>
            <th>Note</th>
            <th>Amount</th>
            <th>Balance</th>
        </tr>
    </thead>
    <tbody>
        
    <tr v-repeat="records" class="{{type == 1 ? 'deposit-row' : 'debit-row'}}">
        <td>{{image ? 'img_link' : 'None'}}</td>
        <td>{{check_id}}</td>
        <td>{{date}}</td>
        <td>{{note}}</td>
        <td class="right">{{amount | makeFloat}}</td>
        <td>{{balance | makeFloat}}</td>
    </tr>

    </tbody>

</table>

</div>


</div>
<script src="bower_components/vue/dist/vue.js"></script>
<script type="text/javascript" src="bower_components/foundation/js/foundation.min.js"></script>
<script type="text/javascript">

// Filters 
Vue.filter('makeFloat', function (value) {
    return parseFloat(value).toFixed(2);
});

// Views (vue's)
var chkbk = new Vue({
    el: '#chkbk-app',
    data: {
        msg: 'Hello, foo',
        records: [
            { check_id: 123, image: '', date: '4/20/2014', note: 'Kroger', type: 0, amount: 124.22, balance: 435.87 },
            { check_id: null, image: '', date: '4/22/2014', note: 'Shell', type: 0, amount: 20.00, balance: 415.87 },
            { check_id: null, image: '', date: '4/20/2014', note: 'Water bill', type: 0, amount: 32.53, balance: 383.34 },
            { check_id: null, image: '', date: '4/20/2014', note: 'Deposit', type: 1, amount: 100.00, balance: 483.34 }
        ]
    },
    methods: {
        saveEntry: function (e) {

            var transaction_type = this.chkbk_type;
            var ttlEntries = this.records.length - 1;
            var prevBalance = this.records[ttlEntries].balance;

            if(transaction_type == 1){
                newBalance = (prevBalance + parseFloat(this.chkbk_amount));
                // console.log('deposit');
            }
            else{
                // console.log('debit');
                newBalance = (prevBalance - parseFloat(this.chkbk_amount));
            }

            this.records.push({
                check_id: this.chkbk_id, 
                date: this.chkbk_date,
                note: this.chkbk_note,
                type: this.chkbk_type,
                amount: this.chkbk_amount,
                balance: parseFloat(newBalance)
            });
            console.log('Saved ok!');
            this.chkbk_amount = "";
            this.chkbk_date = "";
            this.chkbk_type = 0;
            this.chkbk_note = "";
        }
    },

    
});



</script>
</body>
</html>